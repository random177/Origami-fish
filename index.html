<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base64 & 
 Code Translator</title>
    <style>
        body {
            font-family: Comic sans bold, sans-serif;
            margin: 0;
            padding: 20px;
            
            /* DEEP, CHILL BLUE BACKGROUND */
            background-color: #1a1a40; 
            background-image: linear-gradient(
                45deg, 
                #2f2f75 0%,  
                #1a1a40 50%, 
                #0d0d26 100% 
            ); 
            background-repeat: repeat;
            background-size: 100% 100%;
            
            /* WHITE/LIGHT TEXT FOR THE BODY */
            color: #EEEEEE; 
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .translator-section {
            /* CONTAINER BACKGROUND NOW DARK/TRANSPARENT TO BLEND */
            background-color: rgba(255, 255, 255, 0.05); /* Very slight transparency for depth */
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5); /* Stronger shadow for "floating" effect */
            
            /* --- LAYOUT FIX: Use Flexbox for cleaner vertical spacing/flow --- */
            display: flex;
            flex-direction: column;
            /* Added gap to ensure spacing between all direct children (headings, textareas, buttons) */
            gap: 15px; 
            /* ----------------------------------------------------------------- */
        }

        h1 {
            color: #64b5f6; /* Light, chill blue for the main title */
            text-align: center;
            margin-bottom: 30px;
        }

        h2 {
            color: #8cff8c; /* Neon green for headings */
            border-bottom: 2px solid #8cff8c;
            padding-bottom: 5px;
            margin-top: 0;
            /* Adjusted margin-bottom: The gap property on .translator-section now handles the primary spacing */
            margin-bottom: 0; 
        }

        textarea {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            /* Removed margin-bottom here to let the parent's gap control spacing */
            margin-bottom: 0; 
            
            /* TEXTAREA STYLES NOW DARK/LIGHT */
            border: 1px solid #4a4a9c; /* Blue border */
            background-color: #2a2a5a; /* Dark background */
            color: #EEEEEE; /* Light text */
            
            border-radius: 4px;
            box-sizing: border-box;
            resize: vertical;
        }
        
        /* Placeholder text color for dark input fields */
        textarea::placeholder {
            color: #8c8cbe; 
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            
            /* Added margin-top to specifically push buttons slightly away from elements that don't use the gap */
            margin-top: 5px; 
        }

        .base64-btn {
            background-color: #007bff;
            color: white;
        }

        .base64-btn:hover {
            background-color: #0056b3;
        }

        .morse-btn {
            background-color: #28a745;
            color: white;
        }

        .morse-btn:hover {
            background-color: #1e7e34;
        }

        .note {
            font-size: 0.9em;
            color: #a0a0a0; /* Light gray for notes */
            /* Adjusted margins for notes to fit the new flex layout */
            margin-top: -10px;
            margin-bottom: -5px; 
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Text & Base64 Translator Tool</h1>

        <div id="base64-section" class="translator-section">
            <h2>Base64 Encoding/Decoding</h2>
            <textarea id="base64-input" placeholder="Enter text to encode or Base64 to decode..."></textarea>
            <button class="base64-btn" onclick="translateBase64()">Translate Base64</button>
            <div class="note">Enter text to get Base64, or enter Base64 to get text.</div>
            <textarea id="base64-output" placeholder="Translation result will appear here..." readonly></textarea>
        </div>

        <div id="morse-section" class="translator-section">
            <h2>Morse Code Translator</h2>
            <textarea id="morse-input" placeholder="Enter English text OR Morse code (use a single space for letter separation and three spaces for word separation)."></textarea>
            <button class="morse-btn" onclick="translateMorse()">Translate Morse</button>
            <div class="note">Enter English to get Morse, Or enter Morse to get English.</div>
            <textarea id="morse-output" placeholder="Translation result will appear here..." readonly></textarea>
        </div>
    </div>

    <script>
        // Morse Code Dictionary
        const MORSE_CODE = {
            '.-': 'A', '-...': 'B', '-.-.': 'C', '-..': 'D', '.': 'E', '..-.': 'F',
            '--.': 'G', '....': 'H', '..': 'I', '.---': 'J', '-.-': 'K', '.-..': 'L',
            '--': 'M', '-.': 'N', '---': 'O', '.--.': 'P', '--.-': 'Q', '.-.': 'R',
            '...': 'S', '-': 'T', '..-': 'U', '...-': 'V', '.--': 'W', '-..-': 'X',
            '-.--': 'Y', '--..': 'Z',
            '-----': '0', '.----': '1', '..---': '2', '...--': '3', '....-': '4',
            '.....': '5', '-....': '6', '--...': '7', '---..': '8', '----.': '9',
            '.-.-.-': '.', '--..--': ',', '..--..': '?', '.----.': "'", '-.-.--': '!',
            '-..-.': '/', '-.--.': '(', '-.--.-': ')', '.-...': '&', '---...': ':',
            '-.-.-.': ';', '-...-': '=', '.-.-.': '+', '-....-': '-', '..-.-': '_',
            '.-..-.': '"', '...-..-': '$', '.--.-.': '@', '...---...': 'SOS',
            ' ': ' ' // Special case for space to handle inter-word gaps in text
        };

        // Create a reverse map for English to Morse translation
        const ENGLISH_CODE = {};
        for (const code in MORSE_CODE) {
            ENGLISH_CODE[MORSE_CODE[code]] = code;
        }

        // --- Base64 Functions ---

        function isBase64(str) {
            // A basic check to see if the string looks like Base64
            // It checks for valid Base64 characters and padding '='
            if (str.trim().length === 0) return false;
            try {
                return btoa(atob(str)) == str;
            } catch (err) {
                return false;
            }
        }

        function translateBase64() {
            const input = document.getElementById('base64-input').value.trim();
            const outputElement = document.getElementById('base64-output');

            if (!input) {
                outputElement.value = "Please enter text or Base64 code.";
                return;
            }

            if (isBase64(input)) {
                // Decode Base64
                try {
                    // Using atob() for decoding
                    outputElement.value = atob(input);
                } catch (e) {
                    outputElement.value = "Error: Invalid Base64 format.";
                }
            } else {
                // Encode Text to Base64
                try {
                    // Using btoa() for encoding
                    outputElement.value = btoa(input);
                } catch (e) {
                    outputElement.value = "Error: Could not encode text.";
                }
            }
        }

        // --- Morse Code Functions ---
        
        // Helper function to check if the input is likely Morse code
        function isMorseCode(str) {
            // Check if the string only contains dots (.), dashes (-), and spaces ( )
            return /^[.\-\s]*$/.test(str) && 
                   // Ensure it contains at least one dot or dash to distinguish from empty space
                   /[.\-]/.test(str); 
        }

        // NEW: Function to translate English to Morse
        function encodeToMorse(text) {
            // 1. Convert to uppercase to match the dictionary keys
            const upperText = text.toUpperCase();
            let morse = [];

            // 2. Iterate through each character in the text
            for (let i = 0; i < upperText.length; i++) {
                const char = upperText[i];

                if (char === ' ') {
                    // For word separation, push a triple space (standard)
                    morse.push('   '); 
                } else if (ENGLISH_CODE[char]) {
                    // For letters/numbers/punctuation, push the Morse code followed by a single space (standard letter separation)
                    morse.push(ENGLISH_CODE[char]);
                    morse.push(' '); 
                }
                // Ignore characters that are not in the dictionary
            }
            
            // 3. Join and clean up: trim to remove any trailing single space/triple space.
            return morse.join('').trim();
        }

        // UPDATED: Main Morse translation function (handles both ways)
        function translateMorse() {
            const input = document.getElementById('morse-input').value.trim();
            const outputElement = document.getElementById('morse-output');

            if (!input) {
                outputElement.value = "Please enter English text or Morse code.";
                return;
            }

            if (isMorseCode(input)) {
                // DECODE: Morse to English (Existing logic)
                const words = input.split('   ');
                let decodedText = [];

                words.forEach(word => {
                    // Split each word into individual letters using the single space ' ' delimiter
                    const letters = word.split(' ');
                    let decodedWord = '';

                    letters.forEach(code => {
                        const uppercaseCode = code.toUpperCase();
                        // Look up the code in the dictionary, defaulting to empty if not found
                        decodedWord += MORSE_CODE[uppercaseCode] || '';
                    });

                    decodedText.push(decodedWord);
                });

                // Join the words back together with a single space and display
                outputElement.value = decodedText.join(' ').trim();
            } else {
                // ENCODE: English to Morse (New logic)
                outputElement.value = encodeToMorse(input);
            }
        }
    </script>
</body>
</html>
